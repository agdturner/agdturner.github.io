<!DOCTYPE html>
<html lang=en-GB>
<head>
<title>Input and Output Page</title>
<!-- Styling. -->
<!-- The following href is blank, but will be populated once the
DOM is fully loaded. -->
<link id="css" rel="stylesheet" type="text/css" href=""><script src="/scripts/style.js"></script>
<!-- The following are used for stying code. -->
<script src="/tools/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<link id="code_theme" rel="stylesheet" type="text/css" href="">
<!-- Styling. -->
<script src="/scripts/style.js"></script>
<!-- The following are used for stying code. -->
<script src="/tools/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<!-- The following href should be set when the DOM is loaded. -->
<link id="css1" rel="stylesheet" type="text/css" href="">
<link id="css2" rel="stylesheet" type="text/css" href="">
</head>
<body>
<header>
<button id="style_button" onclick="swapStyle()"></button>
<div>
<nav>
<a id="home" class="nav" href="../home/index.html">Home</a> <a id="programming" class="nav" href="../programming/index.html">Programming</a> <a id="python" class="nav" href="../python/index.html">Python</a> <a id="variables" class="nav" href="../variables/index.html">Variables</a> <a id="github" class="nav" href="../github/index.html">GitHub</a> <a id="abm1" class="nav" href="../abm1/index.html">ABM1</a> <a id="containers" class="nav" href="../containers/index.html">Containers</a> <a id="branching" class="nav" href="../branching/index.html">Branching</a> <a id="loops" class="nav" href="../loops/index.html">Loops</a> <a id="abm2" class="nav" href="../abm2/index.html">ABM2</a> <a id="functions" class="nav" href="../functions/index.html">Functions</a> <a id="abm3" class="nav" href="../abm3/index.html">ABM3</a> <a id="classes" class="nav" href="../classes/index.html">Classes</a> <a id="abm4" class="nav" href="../abm4/index.html">ABM4</a> <a id="io" class="nav" href="../io/index.html">IO</a> <a id="abm5" class="nav" href="../abm5/index.html">ABM5</a> <a id="modules" class="nav" href="../modules/index.html">Modules</a> <a id="abm6" class="nav" href="../abm6/index.html">ABM6</a> <a id="exceptions" class="nav" href="../exceptions/index.html">Exceptions</a> <a id="abm7" class="nav" href="../abm7/index.html">ABM7</a> <a id="gui" class="nav" href="../gui/index.html">GUI</a> <a id="abm8" class="nav" href="../abm8/index.html">ABM8</a> <a id="web" class="nav" href="../web/index.html">Web</a> <a id="abm9" class="nav" href="../abm9/index.html">ABM9</a> <a id="testing" class="nav" href="../testing/index.html">Testing</a> <a id="index" class="nav" href="../index/index.html">Index</a> <a id="references" class="nav" href="../references/index.html">References</a>
</nav>
</div>
</header>
<div>
<h1>Input and Output</h1>
<h2 id="1">1. Introduction</h2>
<p>The Python standard library <a href="https://docs.python.org/3/library/io.html">io module</a> provides the main facilities for dealing with input and output (IO). Numerous other standard library modules have  functionality for dealing with specific aspects and types of IO, including:</p>
<a href="https://docs.python.org/3/library/fileinput.html">fileinput</a>,
<a href="https://docs.python.org/3/library/os.html">os</a>,
<a href="https://docs.python.org/3/library/pathlib.html">pathlib</a>,
<a href="https://docs.python.org/3/library/contextlib.html">contextlib</a>,
<a href="https://docs.python.org/3/library/csv.html">csv</a>,
<a href="https://docs.python.org/3/library/json.html">json</a>,
<a href="https://docs.python.org/3/library/pickle.html">pickle</a>
<a href="https://docs.python.org/3/library/markup.html">markup</a>,
<a href="https://docs.python.org/3/library/internet.html">internet</a>,
<a href="https://docs.python.org/3/library/tempfile.html">tempfile</a>, and
<a href="https://docs.python.org/3/library/shutil.html">shutil</a>.
There are also various third party libraries with useful
functionality for read and writing data in specific file formats
and processing data on the Web.</p>

<h2 id="2">2. Standard Input</h2>
<p>The builtins module <a href="https://docs.python.org/3/library/functions.html#input">input function</a> reads input from the standard input 'stdin' which is usually the keyboard. This continues until the &lt;ENTER&gt; (or &lt;RETURN&gt;) key is pressed. The function returns a string (without a newline character). A string provided as a parameter is displayed to prompt user input. Run the following at the Python prompt and enter  some keyboard input:</p>
<pre><code class="language-python">n_agents = input("Enter n_agents (a number between 10 and 100) and press the &lt;ENTER&gt; or &lt;RETURN&gt; key:")
print("The input detected is:", n_agents)</code></pre>

<h2 id="3">3. Streams</h2>
<p>The builtins module function <a href="https://docs.python.org/3/library/functions.html#print">print</a> writes to the standard output 'stdout' which is usually the screen.</p>
<p>Stdin and stdout are streams - flows of data. Standard error
'stderr' is also a stream - one where error messages go. Like
stdout, stderr is usually written to the screen by default.</p>
<p>The streams stdin and stdout can be redirected to come from a
file (in the case of stdin), or go to a file (in the case of
stdout). From the Anaconda Prompt the following will stream data
from 'stdin.txt' into 'a.py' as it runs:</p>
<pre>python a.py &lt; stdin.txt</pre>
<p>The following will send output from running 'a.py' into
'stdout.txt':</p>
<pre>python a.py &gt; stdout.txt</pre>
<p>This would overwrite 'stdout.txt' if it already existed. To
append to the end of any existing 'stdout.txt', the following
could be used:</p>
<pre>python a.py &gt;&gt; stdout.txt</pre>
<p>To stream data in and out, the following can be used:</p>
<pre>python a.py &lt; stdin.txt &gt; stdout.txt</pre>
<p>The stdout of one program can be piped to the stdin of another
program using the pipe symbol '|'.</p>

<p>The <a href="https://docs.python.org/3/library/functions.html#print">print function</a> also includes an option to direct stout to a file. That file has to be open in order for the writing to be successful and the open file should be closed to ensure all the data gets written. Typically reading and writing files uses 'buffers' that read or write a certain number of bytes in one go which is done for efficiency reasons. Closing a file that  is being written to forces a flush of any partially filled buffer. There is an option in the print function to force a flush which can also sometimes be useful...</p>
<h2 id="4">4. Reading and Writing Files Part 1</h2>
<p>The following code uses the builtins module function <a href="https://docs.python.org/3/library/functions.html#open">open</a> to open a file in the current directory called 'a.in' and reads this one line at a time streaming the output to the screen before then closing the file:</p>
<pre><code class="language-python">f = open("a.in")
for line in f:
    print(line)
f.close()</code></pre>

<p>The <a href="https://docs.python.org/3/c-api/file.html">File Object</a> returned from the above <a href="https://docs.python.org/3/library/functions.html#open">open</a> function call 'f' is best closed once it is read by calling it's 'close' method as done on line 4 of the code snippet. After this line is executed, 'f' becomes unusuable. Closing releases system resources and is recommended as good practice altough code will work without doing that.</p>
<p>An alternative where a 'close' method call is not necessary uses the keyword 'with'. The following does effectively the same as the previous snippet:</p>
      <pre><code class="language-python">with open("a.in") as f:
          for line in f:
              print(line)</code></pre>
      <p>This saves having to close the file, but it is awkward this
      way to read several files simultaneously.</p>
<p>The standard library
                    <a href="https://docs.python.org/3/library/fileinput.html">
                    fileinput module</a>
                    helps with reading multiple files simultaneously.</p>

<p>The <a href-"https://docs.python.org/3/library/io.html#io.IOBase.readlines">readlines method</p> can read some or all lines of a file into a list of strings (each item being a line of the file. Whilst this can be convenient, if a file is large and not everything is wanted, then this can use a lot of memory and risks a <a href="https://docs.python.org/3/library/exceptions.html#MemoryError">MemoryError</a> being raised. So, often it is better to parse a file in portions, such as line by line. Parsing might involve processing or simply storing parts or all of the line in  one or more variables.</p>
<p>Files are opened for writing in a similar way. Writing to
a file can be done as follows:</p>
<pre><code class="language-python"># Create something to write
a = []
for i in range(10):
    a.append("Coding is fun!");
# Open a file for writing
f = open("a.out", 'w')
# Write a to the file
for line in a:
    f.write(line)
# Close the file
f.close()</code></pre>
<p>Note the additional 'w' parameter passed into the Open
Function which prepares the file a.out to be written to. Writing
to a file requires different preparation to reading from a file.
</p>
<p>There are other optional arguments that can be used with the
Open Function as detailed in
<a href="https://docs.python.org/3/library/functions.html#open">
The Python Documentation Functions Chapter Open Section</a></p>
<p>Again an alternative using the keyword 'with' that does not
require closing the file is:</p>
<pre><code class="language-python"># Create something to write
a = []
for i in range(10):
    a.append("Coding is fun!");
# Write a to file
with open("a.out", 'w') as f:
    # Write a to the file
    for line in a:
        f.write(line)</code></pre>

<h2 id="5">5. File formats</h2>
<p>File formats were briefly introduced in <a href="../programming/index.html#2.2">Programming Section 2.2</a>.</p>
<p>All files are binary files, but some binary files are known as 'text files' - the encoding is generally recognised as text. Text files are typically delimited into lines by a  'newline' code which in Python is '\n'. File formats are usually defined in a file format specification that details the structure of the file. In this section three types of text file formats are described (CSV, JSON and Markup).</p>
<h3 id="5.1">5.1. CSV</h3>
<p><a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV format</a> files are text files of comma separated values. The values are text, but this text might represent numbers. If a value contains a comma then the value is usually enclosed in quotation marks. If the value also contains quotation marks or newline then there can be difficulty parsing the file.</p>
<h3 id="5.2">5.2. JSON</h3>
<p><a href="https://en.wikipedia.org/wiki/JSON">JavaScript Object Notation</a> (JSON) is an open standard file format and data interchange format that uses human-readable text to store and transmit data objects consisting of attribute–value pairs and arrays (or other serializable values.</p>
<p>Here is an example of some <a href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> data:</p>
<pre>GeoJSON example
{
    "type": "FeatureCollection",
    "features": [ {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [42.0, 21.0]
        },
        "properties": {
            "prop0": "value0"
        }
    }]
}</pre>

<h3 id="5.3">5.3. Markup</h3>
<p>Markup is essentially tags and content. Tags often note the ontological context of the content helping define it's  meaning. Tags can be nested. Examples formats include: <a href="https://en.wikipedia.org/wiki/HTML">HTML</a>; and, <a href="https://en.wikipedia.org/wiki/XML">XML</a>. Style information can be embedded about how to portray the data, but this is better kept separate. XML is extensible in that new tags can be added to extend the langauge in what are known as profiles. There are lots of standard profiles of XML for different kinds of information including <a href="https://en.wikipedia.org/wiki/Geography_Markup_Language">GML</a> the XML grammar defined by the Open Geospatial Consortium (OGC) to express geographical features.</p>
<h2 id="6">6. Reading and Writing Files Part 2</h2>
<p>The following code reads a file line by line, parsing each line
by splitting it using a comma and converting each part into a
Float which is appended to a list which is then appended to
another list called 'data':</p>
<pre><code class="language-python">with open("data.txt") as f:
data = []
for line in f:
    parsed_line = str.split(line,",")
    data_line = []
    for word in parsed_line:
        data_line.append(float(word))
    data.append(data_line)
print(data)</code></pre>

<p>It is easier to read and write CSV format files using functions from the Python standard library <a href="https://docs.python.org/3/reference/simple_stmts.html#continue">csv module</a> written specifically to do this. The following is an example of reading some numeric data:</p>
<pre><code class="language-python">import csv
f = open('data.csv', newline='')
reader = csv.reader(f, quoting=csv.QUOTE_NONNUMERIC)
for row in reader: # A list of rows
    for value in row: # A list of value
        print(value) # Floats
f.close()</code></pre>
<p>The keyword argument 'quoting=csv.QUOTE_NONNUMERIC' not
only puts quotation marks around non numeric data, but also
converts some number formats into Floats.</p>
<p>The following is an example of using the csv module to write
data:</p>
<pre><code class="language-python">import csv
f = open('data.csv', 'w', newline='')
writer = csv.writer(f, delimiter=' ')
for row in data:
    writer.writerow(row) # List of values.
f.close()</code></pre>
<p>The optional delimiter kwarg specified here delimits using
a space ' ' instead of the default comma ',', so this would
actually not generate CSV format data!</p>

<p>The following code uses the standard library <a href="https://docs.python.org/3/library/json.html">json module</a> to read a JSON file:</p>
<pre><code class="language-python">import json
f = open('data.json')
data = json.load(f)
f.close()
print(data)</code></pre>
<p>The following code can be used to write a JSON file:</p>
<pre><code class="language-python">import json
f = open('data.json', 'w')
json.dump(data, f)
f.close()</code></pre>

<p>The standard library for processing HTML and XML is:<a href="https://docs.python.org/3/library/markup.html">markup</a>, but the third party <a href="https://beautiful-soup-4.readthedocs.io/en/latest/">Beautiful Soup</a> package is arguably easier to use, and is used later in the course to parse some HTML.</p>
<h2 id="7">7. Serialisation/Deserialisation</h2>
 <p>Serialisation is the conversion of program data into data
stored typically in a file. Deserialisation is the opposite
process that converts data back into working code. Essentially
any Python object can be serialised and later deserialised. For
details on how to do this, see the standard library
<a href="https://docs.python.org/3/library/pickle.html">
pickle module</a>
</p>

<h2 id="8">8. OS and File Systems</h2>
<h3 id="3">3. OS and File Systems</h3>
<p>The standard library
(<a href="https://docs.python.org/3/library/os.html">os module</a>)
allows for interaction with the underlying computer operating
system (OS), including 'environment variable' manipulation and
file system navigation.</p>

<p>Environment variables are variables at the OS level. The mapping object '<a href="https://docs.python.org/3/library/os.html#os.environ">os.environ</a>' allows for accessing environment information from a Python program. For example, the following will print the <a href="https://en.wikipedia.org/wiki/PATH_(variable)">PATH</a>:</p>
<pre><code class="language-python">import os
print(os.environ["PATH"])</code></pre>
<p>And the following will print a list of every file and directory
in the current working directory:</p>
<pre><code class="language-python">print os.listdir(path='.')</code></pre>
<p>The standard library
<a href="https://docs.python.org/3/library/pathlib.html">
pathlib module</a>
helps with handling file paths and managing file systems</p>
<p>The standard library
<a href="https://docs.python.org/3/library/tempfile.html">
tempfile module</a> is useful for creating temporary files.</p>
<p>The standard library
<a href="https://docs.python.org/3/library/shutil.html">
shutil module</a> is useful for copying files and directory
structures.</p>
<p>The standard library
<a href="https://docs.python.org/3/library/glob.html">
glob module</a> is useful for pattern hunting in files and
directories.</p>

</div>
<footer>
<div>
<p><a id="next" class="nav" href="../abm5/index.html">Next: ABM5</a></p>
</div>
<p>Date last modified: 2023-04-17.</p>
<p><a href="https://creativecommons.org/share-your-work/public-domain/cc0/">CC0 Licence</a></p>
</footer>
</body>
</html>
