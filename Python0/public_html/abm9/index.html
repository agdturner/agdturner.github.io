<!DOCTYPE html>
<HTML lang=en-GB>

<HEAD>

<TITLE>Agent Based Model Practical 9 Page</TITLE>
<!-- Styling -->
<!-- Some href attributes are to be set by scripts -->
<link id="css" rel="stylesheet" type="text/css" href="">
<script src="/scripts/style.js"></script>
<!-- For styling code -->
<script src="/tools/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<link id="code_theme" rel="stylesheet" type="text/css" href="">
<link id="css1" rel="stylesheet" type="text/css" href="">
<link id="css2" rel="stylesheet" type="text/css" href="">

</HEAD>

<BODY>

<button id="style_button" onclick="swapStyle()"></button>

<DIV class="navbar">
<a id="home" class="nav" href="../home/index.html">Home</a> <a id="programming" class="nav" href="../programming/index.html">Programming</a> <a id="python" class="nav" href="../python/index.html">Python</a> <a id="variables" class="nav" href="../variables/index.html">Variables</a> <a id="github" class="nav" href="../github/index.html">GitHub</a> <a id="abm1" class="nav" href="../abm1/index.html">ABM1</a> <a id="containers" class="nav" href="../containers/index.html">Containers</a> <a id="branching" class="nav" href="../branching/index.html">Branching</a> <a id="loops" class="nav" href="../loops/index.html">Loops</a> <a id="abm2" class="nav" href="../abm2/index.html">ABM2</a> <a id="functions" class="nav" href="../functions/index.html">Functions</a> <a id="abm3" class="nav" href="../abm3/index.html">ABM3</a> <a id="classes" class="nav" href="../classes/index.html">Classes</a> <a id="abm4" class="nav" href="../abm4/index.html">ABM4</a> <a id="io" class="nav" href="../io/index.html">IO</a> <a id="abm5" class="nav" href="../abm5/index.html">ABM5</a> <a id="modules" class="nav" href="../modules/index.html">Modules</a> <a id="abm6" class="nav" href="../abm6/index.html">ABM6</a> <a id="exceptions" class="nav" href="../exceptions/index.html">Exceptions</a> <a id="abm7" class="nav" href="../abm7/index.html">ABM7</a> <a id="gui" class="nav" href="../gui/index.html">GUI</a> <a id="abm8" class="nav" href="../abm8/index.html">ABM8</a> <a id="web" class="nav" href="../web/index.html">Web</a> <a id="abm9" class="nav" href="../abm9/index.html">ABM9</a> <a id="testing" class="nav" href="../testing/index.html">Testing</a> <a id="conclusion" class="nav" href="../conclusion/index.html">Conclusion</a> <a id="index" class="nav" href="../index/index.html">Index</a> <a id="references" class="nav" href="../references/index.html">References</a>
</DIV>

<H1>Agent Based Model Practical 9</H1>

<DIV>
<H2>Contents</H2>
<UL>
 <LI><A href="#1">1. Introduction and Preparation</A></LI>
 <LI><A href="#2">2. Parsing an HTML File</A></LI>
</UL>
</DIV>


<DIV>
<H2 id="1">1. Introduction and Preparation</H2>
<P>This practical is about using some data in an HTML file Table to
initialise part of the model.
</P>
<P>In your local code repository 'src' directory duplicate your
'abm8' directory as 'abm9'.
</P>
</DIV>


<DIV>
<H2 id="2">2. Parsing an HTML File</H2>
<P><a href="../../resources/abm9/data.html">The HTML to parse</a>.
</P>
<P>Have a look at the source code for the file by either opening it
in a text editor or viewing the source in your Web browser.
<!--
(The Python code used to generate data.html:
<a href="../../resources/abm9/data.py">data.py</a>.)
-->
</P>
<P>Add the following import statements to 'model.py':</P>
<PRE><CODE class="language-python">import requests
import bs4
</CODE></PRE>

<P>Change the agent initialisation code block as follows:</P>
<PRE><CODE class="language-python"># Initialise agents
url = 'https://agdturner.github.io/resources/abm9/data.html'r = requests.get(url, verify=False)");
content = r.text
soup = bs4.BeautifulSoup(content, 'html.parser')
td_ys = soup.find_all(attrs={"class" : "y"})
td_xs = soup.find_all(attrs={"class" : "x"})
print(td_ys)
print(td_xs)
agents = []
for i in range(n_agents):
    # Create an agent
    y = int(td_ys[i].text) + 99
    x = int(td_xs[i].text) + 99
    agents.append(af.Agent(agents, i, environment, n_rows, n_cols, x, y))
    print(agents[i].agents[i])
</CODE></PRE>
<P>Change the '__init__' function in 'agentframework.py' to:</P>
<PRE><CODE class="language-python">def __init__(self, agents, i, environment, n_rows, n_cols, x = None, y = None):
"""
The constructor method.

Parameters
----------
i : Integer
    To be unique to each instance.
environment : List
    A reference to a shared environment.
n_rows : Integer
    The number of rows in environment.
n_cols : Integer
    The number of columns in environment.
x : Integer
    For initialising the x coordinate of the agent.
y : Integer
    For initialising the y coordinate of the agent.

Returns
-------
None.

"""
self.agents = agents
self.i = i
self.environment = environment
if x == None:
    tnc = int(n_cols / 3)
    self.x = random.randint(tnc - 1, (2 * tnc) - 1)
else:
    self.x = x
if y == None:
    tnr = int(n_rows / 3)
    self.y = random.randint(tnr - 1, (2 * tnr) - 1)
else:
    self.y = y
self.store = random.randint(0, 99)
self.store_shares = 0
</CODE></PRE>

</DIV>

<DIV>

<P><a id="next" class="nav" href="../testing/index.html">Next: Testing</a></P>

<P>Date last modified: 2026-01-17</P>

<P><a href="https://creativecommons.org/share-your-work/public-domain/cc0/">CC0 Licence</a></P>

</DIV>

</BODY>

</HTML>

